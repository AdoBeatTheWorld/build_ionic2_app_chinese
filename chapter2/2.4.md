# 第四课：数据模型和Observable
  
本节课中我们设计应用中将会用到的检查列表的数据模型，他会和Observable进行合作。数据模型不是Ionic 2特有的东西，模型是变成里面同样概念。根据内容的不同，模型的定义多变，但是总的来说模型就是用于存储和代表数据的。  
在Ionic 2和Angular 2中，如果我们想持有某些数据的引用，我们大概需要这样去做：
```typescript
this.myDataArray = ['1', '2', '3'];
```
然后，如果我们是创建模型的话，那么大概是这样子的：
```typescript
this.myDataArray = [
    new MyDataModel('1'),
    new MyDataModel('2'),
    new MyDataModel('3')
];
```
所以，我们创建一个**对象object**来持有数据而不是纯存储。首先，可能比较难理解为什么我们要这么做，对于像上面例子这么简单的数据看起来很复杂，但是同时会带来很多好处。这个应用中带来的主要好处包括：
* 允许我们清晰的定义数据结构
* 允许我们在数据模型里面创建助理函数来操作数据
* 允许我们在不同地方重用数据模型，简化代码
  
真切的希望本课能清晰的给你展示创建数据模型能够带来的好处，但是我体验说明一下这不是必需的。你也可以直接在类里面定义一些数据就可以了。  
我们也在数据模型中会创建和用到我们自己的**Observable**，但是我们还是在遇到他的时候再说吧。  
  
## 创建数据模型
通常如果我们想要创建一个数据模型的话我们将创建一个类来定义他（基本上就是个普通对象），然后定义一些助理函数，就像这样：
```typescript
class PersonModel {

    constructor(name, age){
        this.name = name;
        this.age = age;
    }

    increaseAge(){
        this.age++;
    }

    changeName(name){
        this.name = name;
    }
}
```
然后，我们就可以从他创建以系列的实例（对象）了：
```typescript
let person1 = new PersonModel('Jason', 43);
let person2 = new PersonModel('Louise', 22);
```
然后实例有可以分别去调用助理函数：
```typescript
person1.increaseAge();
```
Ionic 2的理念也差不多，除了Ionic 2/Angular 2中我们需要创建一个**Injectable**（基础里面讲过）。记住**Injectable**用于创建服务，他创建的服务可以注入到任何的其他组件中，所以当我们想要使用数据模型的时候，我们直接注入进去就可以了。  
我们看一下实际的数据模型大概是什么样子的，然后再学习之。  
**> 修改 src/models/checklist-model.ts为以下**  
```typescript
export class ChecklistModel {
    checklist: any;
    checklistObserver: any;
    constructor(public title: string, public items: any[]){
        this.items = items;
    }

    addItem(item): void {
        this.items.push({
            title: item,
            checked: false
        });
    }

    removeItem(item): void {
        let index = this.items.indexOf(item);
        if(index > -1){
            this.items.splice(index, 1);
        }
    }

    renameItem(item, title): void {
        let index = this.items.indexOf(item);
        if(index > -1){
            this.items[index].title = title;
        }
    }

    setTitle(title): void {
        this.title = title;
    }

    toggleItem(item): void {
        item.checked = !item.checked;
    }
}
```
我们这个数据模型所作的实际上是创建了一个单独的检查列表的蓝图。一个检查列表有一个标题和任意数量的需要完成的项。所以，我们设置了成员变量来持有这些值：title是一个简单的字符串，items是一个数组。  
注意，我们允许通过构造器传入标题和项。创建一个新的检查列表的时候必须传入标题，但是项的数组是可选的。如果你想立刻给检查列表添加项的话，我们可以在初始化的时候传入，否则将会初始化一个空的数组。  
我们也创建了大量的助理函数，看起来都挺直白的，他们允许我们改变检查列表的标题，或者修改检查列表的项目（修改名字，移除项，给检查列表添加新的项，设置项的完成状态）。  
同时主题我们有在每个函数后面加上：*void*。就像我们声明变量的时候指定类型一样：
```typescript
checklist: any
```
我们也可以声明函数的返回值类型。在本案例中，没有返回值，所有我们用的是*void*。如果其中一个函数返回字符串的话，那么我们就用：*string*代替。  
设置完以上之后，我们可以在任何导入了Checklist Model（下一课会讲）的组件里简单的通过以下代码创建一个新的检查列表：
```typescript
let newChecklist = new ChecklistModel('My Checklist', []);
```
或者
```typescript
let newChecklist = new ChecklistModel('My Checklist', myItemsArray);
```
