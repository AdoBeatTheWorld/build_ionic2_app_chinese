# 第六课：模块
  
模板，个人认为是Ionic 2中最有趣的东西。也是框架能力闪耀的地方。看看下面的代码：
```html
<ion-header>
    <ion-navbar color="secondary">
        <ion-title>
            My Friends
        </ion-title>
        <ion-buttons end>
        <button ion-button icon-only (click)="doSomethingCool()"><ion-icon name="add-circle"></ion-icon></button>
        </ion-buttons>
    </ion-navbar>
</ion-header>
<ion-content>
    <ion-searchbar (input)="getItems($event)"></ion-searchbar>
    <ion-list>
        <ion-item *ngFor="let item of items">
            <ion-avatar item-left>
            <img [src]="item.picture">
            </ion-avatar>
            <h2>{{item.name}}</h2>
            <p>{{item.description}}</p>
        </ion-item>
    </ion-list>
</ion-content>
```
上面代码在没有额外样式的情况下，看起来将会是这样的：
![列表](/imgs/1.6.1.jpg)  
  
看起来没那么惊艳，但是我们就已经用简单的几行代码设置好了一个复杂的布局，加点自定义样式的话，我们就可以得到一个非常时尚的界面了。稍后我们会从各个方面彻底的了解在Ionic 2中创建模板，但是目前我需要给你找找一个完整的页面模板看起来是什么感觉，以及使用Ionic提供的组件是多么的简单。  

Ionic 2中的模板语法有很多知识需要学习，如果你之前有使用过Ionic 1的话，你会发现他有一些重大的变更 -- 所以我们需要具体的学习一下模板。  

此后也会涉及到其他的一些知识，但是这个是我认为这开始使用Ionic 2之前最后学要学习的‘核心’知识 -- 一旦你拿下了类和模板，那么你就可以直接可以开始制作一些东西。所以，我们先转入一些基础理论知识的学习，然后在做学一些练习示例吧。  

## * 语法
*可能是Ionic 2里面最让人困惑的语法之一了。你会经常遇到一些这样的代码：
```html
<ion-item *ngFor="let item of items">
```
或者
```html
<p *ngIf="someBoolean"><p>
```
诸如此类。在Angular 2中 * 语法用与创建一个嵌入模板的快捷方式，所以，当我们使用 *ngIf的时候，上面的代码展开来就是：
```html
<template [ngIf]="someBoolean">
    <p></p>
</template>
```
使用模板的原因是Angular 2将模板看作是DOM块，这样一来就可以动态操作他了。所以，在上面的 *ngIf 范例中我们不会只按照字面意思将他渲染到DOM，
```html
<p *ngIf="someBoolean"></p>
```
如果 *someBoolean* 等于true的话，会显示：
```html
<p></p>
```
false的话就不显示。同理，当我们使用 *ngFor的时候，我们不只是按照字面上去渲染：
```html
<p *ngFor="let item of items">{{item.name}}</p>
```
我们会针对每个条目分别以段落的方式渲染出来：
```html
<p>Bananas</p>
<p>More Bananas</p>
<p>Pancakes</p>
```
要使用这个功能的话，我们需要使用*<template>*，但是手动写这些模板又很繁琐，所以 * 语法是用来简化这些繁琐的操作的。  
解释得这么清楚了，我们来具体的看看想 *ngIf 和 *ngFor 这样的指令的使用方法。  

## 循环
很多时候你会循环大量的数据 -- 例如当你有一个文章列表你想要将所有文章的标题渲染到一个列表。我们就可以用Angular 2 提供的**ngFor**指令来完成这个任务了 -- 看起来大概是这样的：
```html
<ion-list>
    <ion-item *ngFor="let article of articles" (click)="viewArticle(article)">
        {{article.title}}
    </ion-item>
</ion-list>
```
上面的例子中，我们创建了一个*<ion-list>*，然后对于**articles**数组里面的每个**article**我们都添加了一个*<ion-item>*。在之前的基础部分我讲过了使用let来创建一个局部变量，我们这里就用到了。他允许我们访问我们当前循环到的**article**，我们使用这个变量来获取他的标题然后在列表上渲染出来，同时，在用户点击的时候将他传入到*viewArticle*函数中。  
通过将当前article的引用传入到*viewArticle*函数，我们可以用来做类似弹出文章新页面的操作。  

## 条件
有时候你想着符合特定条件的情况下展示模板特定的部分，可以使用一些方法来做到：
```html
<div *ngIf="someBoolean">
```
当*ngIf*的表达式值为true的时候，那么他附加到的节点才会被渲染出来。在本例中，只有在*someBoolean*为true的时候，才会被添加到DOM，反之则不会。  
*ngIf*在布尔场景（true和false）下非常厉害，但是有时候你需要根据大量不同的值来处理。这种情况下就得使用*ngSwitch*：
```html
<div [ngSwitch]="paragraphNumber">
    <p *ngSwitchCase="1">Paragraph 1</p>
    <p *ngSwitchCase="2">Paragraph 2</p>
    <p *ngSwitchCase="3">Paragraph 3</p>
    <p *ngSwitchDefault>Paragraph</p>
</div>
```
在这个例子中，我们使用*ngSwitch*来检查*paragraphNumber*的值。哪个*ngSwitchCase*语句匹配到了这个值，就会是以哪个作为DOM元素去渲染，如果没有匹配上的值，那么就用*ngSwitchDefault*元素。  
还可以通过*hidden*属性去根据条件去显示或者隐藏一个元素。  
例如：
```html
<ion-avatar [hidden]="hideAvatar" item-left>
```
在这个例子中，当*hideAvatar*为**true**的时候，这个元素将会隐藏，当为**false**的时候则显示。使用这个方法的时候，你的类定义里面应该有**this**.*hideAvatar*变量存在，你可以通过给这个变量赋值来控制元素的显示和隐藏。  
不但可以根据条件显示整个元素，还可以根据条件给元素添加不同的类，例如：
```html
<ion-avatar [class.my-class]="showMyClass" item-left>
```
这个跟上面的*[hidden]*方法类似，但是他不是根据条件显示和隐藏元素，他根据条件来添加CSS里面定义好的类。这个方法非常实用，例如，当你想要用来区分列表里面已读和未读信息的时候。  

## Ionic 2 模板组件